<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Uploaded Images</title>
    <link rel="stylesheet" href="/static/styles.css">
    <style>
        table {
            border-collapse: collapse;
            width: 90%;
            margin: 20px auto;
        }
        th, td {
            padding: 10px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }
        th {
            background-color: #f2f2f2;
        }
        tr:hover {background-color: #f9f9f9;}
        .back-button, .delete-button, .page-button {
            display: inline-block;
            margin: 5px;
            text-decoration: none;
            padding: 6px 12px;
            border-radius: 5px;
        }
        .back-button {
            background-color: #007bff;
            color: white;
        }
        .delete-button {
            background-color: #dc3545;
            color: white;
        }
        .page-button {
            background-color: #6c757d;
            color: white;
        }
        .page-button.active {
            background-color: #28a745;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <h2 style="text-align:center;">Uploaded Images</h2>

    {% if images %}
        <table>
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Preview</th>
                    <th>Original Name</th>
                    <th>Stored Filename</th>
                    <th>Size (KB)</th>
                    <th>Uploaded At</th>
                    <th>File Type</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody>
                {% for img in images %}
                <tr>
                    <td>{{ img.id }}</td>
                    <td>
                        <a href="/images-list/{{ img.filename }}" target="_blank">
                            <img src="/images-list/{{ img.filename }}" alt="{{ img.original_name }}" style="max-height:50px;">
                        </a>
                    </td>
                    <td>{{ img.original_name }}</td>
                    <td>{{ img.filename }}</td>
                    <td>{{ (img.size / 1024) | round(1) }}</td>
                    <td>{{ img.upload_time.strftime("%Y-%m-%d %H:%M:%S") }}</td>
                    <td>{{ img.file_type }}</td>
                    <td>
                        <a href="/delete/{{ img.filename }}" class="delete-button">Delete</a>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>

        <!-- Pagination -->
        {% if total_pages > 1 %}
        <div style="text-align:center; margin-top:20px;">
          {% if page > 1 %}
            <a href="/images-list?page={{ page - 1 }}" class="page-button">← Previous</a>
          {% endif %}

          <span>Page {{ page }} of {{ total_pages }}</span>

          {% if page < total_pages %}
            <a href="/images-list?page={{ page + 1 }}" class="page-button">Next →</a>
          {% endif %}
        </div>
        {% endif %}
    {% else %}
        <p style="text-align:center;">No images uploaded yet.</p>
    {% endif %}

    <div style="text-align:center;">
        <a href="/" class="back-button">← Back to Home</a>
    </div>
</body>
</html>
